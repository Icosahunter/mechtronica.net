---
layout: template.njk
title: MechDB Viewer
permalink: mechdb/builder/
---
<style>
    .joint {
        position: absolute;
        width: 7.5%;
        aspect-ratio: 1;
    }

    .slot {
        position: absolute;
        width: 14%;
        aspect-ratio: 1;
    }

    .slot:hover {
        filter: brightness(200%);
    }

    .content-wrapper {
        overflow-y: hidden;
    }

    .selected_slot {
        border-radius: 15%;
        border: 3px solid yellow;
    }

</style>
<div class="d-flex flex-row">
    <div class="d-flex flex-column" style="width: 30%;">
        <table>
            <th></th>
            <th>Available</th>
            <th>Used</th>
            <th>Excess</th>
            <tr>
                <th>Power</th>
                <td id="available-power"></td>
                <td id="used-power"></td>
                <td id="excess-power"></td>
            </tr>
            <tr>
                <th>Cooling</th>
                <td id="available-cooling"></td>
                <td id="used-cooling"></td>
                <td id="excess-cooling"></td>
            </tr>
            <tr>
                <th>CPU</th>
                <td id="available-cpu"></td>
                <td id="used-cpu"></td>
                <td id="excess-cpu"></td>
            </tr>
        </table>
        <div class="position-relative">
            <img style="margin-top: 7%; width: 100%;" src="{{site.url}}/images/frames/standard-background.svg">
            <!-- Left Arm -->
            <img id="LJ" class="joint" style="top: 15%; left: 19%;" src="{{site.url}}/images/frames/joint-background.svg">
            <img id="L1" class="slot" style="top: 10%; left: 3%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('L1');">
            <img id="L2" class="slot" style="top: 34%; left: 3%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('L2');">
            <!-- Right Arm -->
            <img id="RJ" class="joint" style="top: 15%; right: 19%;" src="{{site.url}}/images/frames/joint-background.svg">
            <img id="R1" class="slot" style="top: 10%; right: 3%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('R1');">
            <img id="R2" class="slot" style="top: 34%; right: 3%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('R2');">
            <!-- Torso -->
            <img id="T1" class="slot" style="top: 0; left: 28%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('T1');">
            <img id="T2" class="slot" style="top: 0; right: 28%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('T2');">
            <img id="T3" class="slot" style="top: 17%; left: 28%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('T3');">
            <img id="T4" class="slot" style="top: 17%; right: 28%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('T4');">
            <img id="T5" class="slot" style="top: 28%; left: 43%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('T5');">
            <img id="T6" class="slot" style="top: 34%; left: 28%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('T6');">
            <img id="T7" class="slot" style="top: 34%; right: 28%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('T7');">
            <!-- Legs -->
            <img id="BJ" class="joint" style="top: 50%; left: 46.5%;" src="{{site.url}}/images/frames/joint-background.svg">
            <img id="B1" class="slot" style="top: 58%; left: 17%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('B1');">
            <img id="B2" class="slot" style="top: 58%; right: 17%;" src="{{site.url}}/images/frames/slot-background.svg" onclick="slot_click('B2');">
        </div>
    </div>
    <div style="width: 60%;">
        <div class="d-flex m-10">
            <p class="m-0 mr-10">Search: </p>
            <input type='search' class='form-control' id='mechdb-search' placeholder='Search MechDB'>
        </div>
        <div class="d-flex m-10">
            <p class="m-0 mr-10">Filter by type: </p>
            <select class="form-control w-200" id="type-select" onchange="onchange_typeselect()">
                <option value="" selected="selected" disabled="disabled">Select</option>
                <option value="Frame">Frame</option>
                <option value="Plating">Plating</option>
                <option value="Cabin">Cabin</option>
                <option value="Mainframe">Mainframe</option>
                <option value="Module">Module</option>
                <option value="Cooler">Cooler</option>
                <option value="Power Plant">Power Plant</option>
                <option value="Tank">Tank</option>
                <option value="Weapon">Weapon</option>
                <option value="Equipment">Equipment</option>
            </select>
        </div>
        <div class="overflow-y-scroll" style="height: calc(100vh - 25rem);">
            <table class='table' id='results'></table>
        </div>
    </div>
</div>

<script>
    components = [];
    selected_slot = null;
    available_p = {
        'power': document.getElementById('available-power'),
        'cooling': document.getElementById('available-cooling'),
        'cpu': document.getElementById('available-cpu')
    }
    used_p = {
        'power': document.getElementById('used-power'),
        'cooling': document.getElementById('used-cooling'),
        'cpu': document.getElementById('used-cpu')
    }
    excess_p = {
        'power': document.getElementById('excess-power'),
        'cooling': document.getElementById('excess-cooling'),
        'cpu': document.getElementById('excess-cpu')
    }

    function slot_click(slot) {
        if (selected_slot != null) {
            selected_slot.classList.remove('selected_slot');
        }
        selected_slot = document.getElementById(slot);
        selected_slot.classList.add('selected_slot');
    }

    function calculate_resources() {
        available = {'power': 0, 'cooling': 0, 'cpu': 0};
        used = {'power': 0, 'cooling': 0, 'cpu': 0};
        excess = {'power': 0, 'cooling': 0, 'cpu': 0};
        for (let x of ['power', 'cooling', 'cpu']) {
            for (let component of components) {
                if (x in component) {
                    if (component[x] > 0) {
                        used[x] += component[x];
                    }
                    else {
                        available[x] -= component[x];
                    }
                }
            }
            excess[x] = available[x] - used[x];
            available_p[x].innerHTML = str(available[x])
            used_p[x].innerHTML = str(used[x])
            excess_p[x].innerHTML = str(excess[x])
        }
        
    }
</script>
<script src='{{site.url}}/jsonpath-0.8.0.js'></script>
<script src='{{site.url}}/mechdb.js'></script>